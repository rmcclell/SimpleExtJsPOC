Ext.define("App.model.Roster",{extend:"Ext.data.Model",idProperty:"id",fields:[{type:"int",name:"id"},{type:"int",name:"number"},{type:"string",name:"pictureCls",critical:!1,persist:!1},{type:"string",name:"playerName"},{type:"string",name:"pos"},{type:"string",name:"batArm",defaultValue:"R"},{type:"string",name:"throwArm",defaultValue:"R"},{type:"string",name:"height"},{type:"int",name:"weight"},{type:"int",name:"age"},{type:"int",name:"experience"},{type:"string",name:"birthplace"},{type:"string",name:"college",defaultValue:"None"},{type:"int",name:"salary"},{type:"string",name:"category",defaultValue:"Outfielders"}],proxy:{type:"rest",url:window.location.protocol+"//"+window.location.host+"/api/Roster",noCache:!1,simpleGroupMode:!0,simpleSortMode:!0,startParam:"",reader:{type:"json",rootProperty:"items",totalProperty:"totalCount"},writer:{type:"json",allowSingle:!0}}});Ext.define("App.store.Roster",{extend:"Ext.data.Store",storeId:"roster",pageSize:28,remoteFilter:!1,remoteSort:!1,remoteGroup:!1,alias:"store.roster",groupField:"category",requires:["App.model.Roster"],autoLoad:!1,model:"App.model.Roster"});Ext.define("App.view.Roster",{extend:"Ext.grid.Panel",title:"Roster",alias:"widget.roster",store:"roster",tbar:[{xtype:"button",text:"Add Player",itemId:"add",iconCls:"x-fa fa-plus green"}],selModel:{selType:"rowmodel",pruneRemoved:!1},plugins:[{ptype:"gridfilters"},{ptype:"rowediting",clicksToEdit:2}],features:[{ftype:"grouping",groupHeaderTpl:'{columnName}: {name} ({rows.length} Item{[values.rows.length > 1 ? "s" : ""]})',groupers:[{property:"category"}]}],bbar:{xtype:"pagingtoolbar",displayInfo:!0},columns:[{text:"Id",dataIndex:"id",hidden:!0,filter:{type:"string"}},{width:90,style:"text-align:right;",align:"right",text:"Number",dataIndex:"number",editor:"numberfield",filter:{type:"number"}},{width:100,text:"Picture",dataIndex:"pictureCls",renderer:function(n,t){return t&&(t.tdCls=n),n},editRenderer:function(n){return Ext.String.format('<div class="{0}"><\/div>',n)}},{flex:1,text:"Player Name",cellWrap:!0,dataIndex:"playerName",editor:"textfield",filter:{type:"string"}},{flex:1,text:"Position(s)",cellWrap:!0,dataIndex:"pos",renderer:function(n){return n.replace(/\//g," / ")},editor:{xtype:"tagfield",grow:!0,growMax:80,hideTrigger:!0,delimiter:"/",store:["1B","3B","2B","C","CF","LF","RF","RP","P","CL","SP","SS"]},filter:{type:"list",options:["1B","3B","2B","C","CF","LF","RF","RP","P","CL","SP","SS"]}},{width:160,text:"Arms",columns:[{width:80,text:"Batting",dataIndex:"batArm",align:"center",editor:{xtype:"combo",store:["L","R","S"]},filter:{type:"list",options:["R","L","S"]}},{width:80,text:"Throw",dataIndex:"throwArm",align:"center",editor:{xtype:"combo",store:["L","R","S"]},filter:{type:"list",options:["R","L","S"]}}]},{width:80,text:"Height",dataIndex:"height",style:"text-align:right;",align:"right",editor:{xtype:"combo",store:["5' 0\"","5' 1\"","5' 2\"","5' 3\"","5' 4\"","5' 5\"","5' 6\"","5' 7\"","5' 8\"","5' 9\"","5' 10\"","5' 11\"","6' 0\"","6' 1\"","6' 2\"","6' 3\"","6' 4\"","6' 5\"","6' 6\"","6' 7\"","6' 8\"","6' 9\"","6' 10\"","6' 11\""]},filter:{type:"list",options:["5' 0\"","5' 1\"","5' 2\"","5' 3\"","5' 4\"","5' 5\"","5' 6\"","5' 7\"","5' 8\"","5' 9\"","5' 10\"","5' 11\"","6' 0\"","6' 1\"","6' 2\"","6' 3\"","6' 4\"","6' 5\"","6' 6\"","6' 7\"","6' 8\"","6' 9\"","6' 10\"","6' 11\""]}},{width:85,text:"Weight",dataIndex:"weight",style:"text-align:right;",align:"right",editor:"numberfield",filter:{type:"number"}},{width:65,text:"Age",dataIndex:"age",style:"text-align:right;",align:"right",editor:"numberfield",filter:{type:"number"}},{width:110,text:"Experience",dataIndex:"experience",style:"text-align:right;",align:"right",editor:"numberfield",filter:{type:"number"},renderer:function(n){return n===0?"R":n}},{flex:1,cellWrap:!0,text:"Birthplace",dataIndex:"birthplace",editor:"textfield",filter:{type:"string"}},{flex:1,cellWrap:!0,text:"College",dataIndex:"college",editor:{xtype:"combo",store:["Connecticut","East Carolina","Evansville","Georgia Tech","Kentucky","LSU","None","Northeastern","Oklahoma","Oregon","Rollins","Southern Nevada CC","Texas Tech","UCLA","Virginia","Western Carolina"]},filter:{type:"list"}},{width:100,text:"Salary",dataIndex:"salary",style:"text-align:right;",align:"right",editor:"numberfield",formatter:"currency",filter:{type:"number"}},{width:100,text:"Category",dataIndex:"category",editor:{xtype:"combo",store:["Catchers","Pitchers","Infielders","Outfielders"]},filter:{type:"list"}},{xtype:"actioncolumn",width:50,menuDisabled:!0,sortable:!1,items:[{iconCls:"x-fa fa-pencil yellow",tooltip:"Edit Row",handler:function(n,t,i,r,u,f,e){this.fireEvent("editaction",n,t,i,r,u,f,e)}},{iconCls:"x-fa fa-remove red",tooltip:"Remove Row",handler:function(n,t,i,r,u,f,e){this.fireEvent("deleteaction",n,t,i,r,u,f,e)}}]}]});Ext.define("App.view.Viewport",{extend:"Ext.container.Viewport",requires:["App.model.Roster","App.store.Roster","App.view.Roster"],layout:"fit",items:[{xtype:"roster"}]});Ext.define("App.controller.Roster",{extend:"Ext.app.Controller",refs:[{ref:"viewport",selector:"viewport"}],stores:["Roster"],models:["Roster"],views:["Roster"],init:function(){this.control({roster:{edit:{fn:this.onSave,scope:this},beforerender:{fn:this.launch,scope:this}},"roster button#add":{click:{fn:this.onAddRow,scope:this}},"roster actioncolumn":{editaction:{fn:this.onEditRow,scope:this},deleteaction:{fn:this.onDeleteRow,scope:this}}})},launch:function(n){n.getStore().load({params:{page:1,limit:28}})},onEditRow:function(n,t){n.editingPlugin.startEdit(t,0)},onDeleteRow:function(n,t,i,r,u,f){var e=n.getStore();return Ext.Msg.show({title:"Confirm Delete",message:"Are you sure you would like to delete the current row?",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,fn:function(n){n==="yes"&&(e.remove(f),e.sync())}})},onSave:function(n,t){t.record.store.sync()},onAddRow:function(n){var t=n.up("grid"),i=t.getStore(),r=i.add({}),u=i.indexOf(r[0]);r[0].phantom=!0;t.editingPlugin.startEdit(u,0)}});Ext.application({name:"App",autoCreateViewport:!0,controllers:["App.controller.Roster"],launch:function(){Ext.util.Format.currencyPrecision=0;Ext.tip.QuickTipManager.init();Ext.apply(Ext.tip.QuickTipManager.getQuickTip(),{dismissDelay:0})}});